<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/">
<title>td7.rst</title>
<style type="text/css">

/* Minimal style sheet for the HTML output of Docutils.                    */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: minimal.css 8783 2021-06-30 07:47:46Z milde $                                                               */
/* :Copyright: © 2015, 2021 Günter Milde.                                  */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */

/* This CSS3 stylesheet defines rules for Docutils elements without        */
/* HTML equivalent. It is required to make the document semantics visible. */
/*                                                                         */
/* .. _validates: http://jigsaw.w3.org/css-validator/validator$link        */

/* titles */
p.topic-title,
p.admonition-title,
p.system-message-title {
  font-weight: bold;
}
p.sidebar-title,
p.rubric {
  font-weight: bold;
  font-size: larger;
}
p.rubric {
  color: maroon;
}
p.subtitle,
p.section-subtitle,
p.sidebar-subtitle {
  font-weight: bold;
  margin-top: -0.5em;
}
h1 + p.subtitle {
  font-size: 1.6em;
}
a.toc-backref {
  color: inherit;
  text-decoration: none;
}

/* Warnings, Errors */
.system-messages h2,
.system-message-title,
span.problematic {
  color: red;
}

/* Inline Literals */
.docutils.literal {
  font-family: monospace;
  white-space: pre-wrap;
}
/* do not wrap at hyphens and similar: */
.literal > span.pre { white-space: nowrap; }

/* Lists */

/* compact and simple lists: no margin between items */
.simple  li, .simple  ul, .simple  ol,
.compact li, .compact ul, .compact ol,
.simple  > li p, dl.simple  > dd,
.compact > li p, dl.compact > dd {
  margin-top: 0;
  margin-bottom: 0;
}
/* Nested Paragraphs */
p:first-child { margin-top: 0; }
p:last-child { margin-bottom: 0; }
details > p:last-child { margin-bottom: 1em; }

/* Table of Contents */
.contents ul.auto-toc { /* section numbers present */
  list-style-type: none;
}

/* Enumerated Lists */
ol.arabic     { list-style: decimal }
ol.loweralpha { list-style: lower-alpha }
ol.upperalpha { list-style: upper-alpha }
ol.lowerroman { list-style: lower-roman }
ol.upperroman { list-style: upper-roman }

/* Definition Lists and Derivatives */
dt .classifier { font-style: italic }
dt .classifier:before {
  font-style: normal;
  margin: 0.5em;
  content: ":";
}
/* Field Lists and similar */
/* bold field name, content starts on the same line */
dl.field-list,
dl.option-list,
dl.docinfo {
  display: flow-root;
}
dl.field-list > dt,
dl.option-list > dt,
dl.docinfo > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.2em;
}
/* Offset for field content (corresponds to the --field-name-limit option) */
dl.field-list > dd,
dl.option-list > dd,
dl.docinfo > dd {
  margin-left:  9em; /* ca. 14 chars in the test examples, fit all Docinfo fields */
}
/* start nested lists on new line */
dd > dl:first-child,
dd > ul:first-child,
dd > ol:first-child {
  clear: left;
}
/* start field-body on a new line after long field names */
dl.field-list > dd > *:first-child,
dl.option-list > dd > *:first-child
{
  display: inline-block;
  width: 100%;
  margin: 0;
}

/* Bibliographic Fields (docinfo) */
dl.docinfo pre.address {
  font: inherit;
  margin: 0.5em 0;
}
dl.docinfo > dd.authors > p { margin: 0; }

/* Option Lists */
dl.option-list > dt { font-weight: normal; }
span.option { white-space: nowrap; }

/* Footnotes and Citations  */

.footnote, .citation { margin: 1em 0; } /* default paragraph skip (Firefox) */
/* hanging indent */
.citation { padding-left: 2em; }
.footnote { padding-left: 1.7em; }
.footnote.superscript { padding-left: 0.9em; }
.citation > .label { margin-left: -2em; }
.footnote > .label { margin-left: -1.7em; }
.footnote.superscript > .label { margin-left: -0.9em; }

.footnote > .label + *,
.citation > .label + * {
  display: inline-block;
  margin-top: 0;
  vertical-align: top;
}
.footnote > .backrefs + *,
.citation > .backrefs + * {
  margin-top: 0;
}
.footnote > .label + p, .footnote > .backrefs + p,
.citation > .label + p, .citation > .backrefs + p {
  display: inline;
  vertical-align: inherit;
}

.backrefs > a { font-style: italic; }

/* superscript footnotes */
a[role="doc-noteref"].superscript,
.footnote.superscript > .label,
.footnote.superscript > .backrefs {
  vertical-align: super;
  font-size: smaller;
  line-height: 1;
}
a[role="doc-noteref"].superscript > .fn-bracket,
.footnote.superscript > .label > .fn-bracket {
  /* hide brackets in display but leave for copy/paste */
  display: inline-block;
  width: 0;
  overflow: hidden;
}
[role="doc-noteref"].superscript + [role="doc-noteref"].superscript {
  padding-left: 0.15em; /* separate consecutive footnote references */
  /* TODO: unfortunately, "+" also selects with text between the references. */
}

/* Alignment */
.align-left   {
  text-align: left;
  margin-right: auto;
}
.align-center {
  text-align: center;
  margin-left: auto;
  margin-right: auto;
}
.align-right  {
  text-align: right;
  margin-left: auto;
}
.align-top    { vertical-align: top; }
.align-middle { vertical-align: middle; }
.align-bottom { vertical-align: bottom; }

/* reset inner alignment in figures and tables */
figure.align-left, figure.align-right,
table.align-left, table.align-center, table.align-right {
  text-align: inherit;
}

/* Text Blocks */
.topic { margin: 1em 2em; }
.sidebar,
.admonition,
.system-message {
  margin: 1em 2em;
  border: thin solid;
  padding: 0.5em 1em;
}
div.line-block { display: block; }
div.line-block div.line-block, pre { margin-left: 2em; }

/* Code line numbers: dropped when copying text from the page */
pre.code .ln { display: none; }
pre.code code:before {
  content: attr(data-lineno); /* …, none) fallback not supported by any browser */
  color: gray;
}

/* Tables */
table {
  border-collapse: collapse;
}
td, th {
  border: thin solid silver;
  padding: 0 1ex;
}
.borderless td, .borderless th {
  border: 0;
  padding: 0;
  padding-right: 0.5em /* separate table cells */
}

table > caption {
  text-align: left;
  margin-top: 0.2em;
  margin-bottom: 0.2em;
}
table.captionbelow {
  caption-side: bottom;
}

/* Document Header and Footer */
header { border-bottom: 1px solid black; }
footer { border-top: 1px solid black; }

/* Images are block-level by default in Docutils */
/* New HTML5 block elements: set display for older browsers */
img, header, footer, main, aside, nav, section, figure, video, details {
  display: block;
}
/* inline images */
p img, p video, figure img, figure video {
  display: inline;
}

</style>
<style type="text/css">

/* CSS31_ style sheet for the output of Docutils HTML writers.             */
/* Rules for easy reading and pre-defined style variants.                  */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: plain.css 8805 2021-08-10 14:13:35Z milde $                                                               */
/* :Copyright: © 2015 Günter Milde.                                        */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */
/* .. _CSS3: http://www.w3.org/TR/CSS3                                     */


/* Document Structure */
/* ****************** */

/* "page layout" */
body {
  margin: 0;
  background-color: #dbdbdb;
  --field-indent: 9em; /* default indent of fields in field lists */
}
main, footer, header {
  line-height:1.6;
  /* avoid long lines --> better reading */
  /* optimum is 45…75 characters/line <http://webtypography.net/2.1.2> */
  /* OTOH: lines should not be too short because of missing hyphenation, */
  max-width: 50rem;
  padding: 1px 2%; /* 1px on top avoids grey bar above title (mozilla) */
  margin: auto;
}
main {
  counter-reset: table figure;
  background-color: white;
}
footer, header {
  font-size: smaller;
  padding: 0.5em 2%;
  border: none;
}

/* Table of Contents */
ul.auto-toc > li > p {
  padding-left: 1em;
  text-indent: -1em;
}
nav.contents ul {
  padding-left: 1em;
}
main > nav.contents ul ul ul ul:not(.auto-toc) {
  list-style-type: '\2B29\ ';
}
main > nav.contents ul ul ul ul ul:not(.auto-toc) {
  list-style-type: '\2B1D\ ';
}

/* Transitions */
hr.docutils {
  width: 80%;
  margin-top: 1em;
  margin-bottom: 1em;
  clear: both;
}

/* Paragraphs */

/* vertical space (parskip) */
p, ol, ul, dl, li,
div.line-block,
.footnote, .citation,
div > math,
table {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

h1, h2, h3, h4, h5, h6,
dd, details > p:last-child {
  margin-bottom: 0.5em;
}

/* Lists */
/* ===== */

/* Definition Lists */
/* Indent lists nested in definition lists */
dd > ul:only-child, dd > ol:only-child { padding-left: 1em; }

/* Description Lists */
/* styled like in most dictionaries, encyclopedias etc. */
dl.description {
  display: flow-root;
}
dl.description > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.3em;
}
dl.description > dd:after {
  display: table;
  content: "";
  clear: left; /* clearfix for empty descriptions */
}

/* Field Lists */

dl.field-list > dd,
dl.docinfo > dd {
  margin-left: var(--field-indent); /* adapted in media queries or HTML */
}

/* example for custom field-name width */
dl.field-list.narrow > dd {
  --field-indent: 5em;
}
/* run-in: start field-body on same line after long field names */
dl.field-list.run-in > dd p {
  display: block;
}

/* Bibliographic Fields */

/* generally, bibliographic fields use dl.docinfo */
/* but dedication and abstract are placed into divs */
div.abstract p.topic-title {
  text-align: center;
}
div.dedication {
  margin: 2em 5em;
  text-align: center;
  font-style: italic;
}
div.dedication p.topic-title {
  font-style: normal;
}

/* disclosures */
details { padding-left: 1em; }
summary { margin-left: -1em; }

/* Text Blocks */
/* =========== */

/* Literal Blocks */
pre.literal-block, pre.doctest-block,
pre.math, pre.code {
  font-family: monospace;
}

/* Block Quotes and Topics */
bockquote { margin: 1em 2em; }
blockquote p.attribution,
.topic p.attribution {
  text-align: right;
  margin-left: 20%;
}

/* Tables */
/* ====== */

/* th { vertical-align: bottom; } */

table tr { text-align: left; }

/* "booktabs" style (no vertical lines) */
table.booktabs {
  border: 0;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.booktabs * {
  border: 0;
}
table.booktabs th {
  border-bottom: thin solid;
}

/* numbered tables (counter defined in div.document) */
table.numbered > caption:before {
  counter-increment: table;
  content: "Table " counter(table) ": ";
  font-weight: bold;
}

/* Explicit Markup Blocks */
/* ====================== */

/* Footnotes and Citations */
/* ----------------------- */

/* line on the left */
.footnote {
  border-left: solid thin;
  padding-left: 2.1em;
  margin-bottom: 0;
}
.footnote + .footnote {
  padding-top: 0.5em;
  margin-top: 0;
}
.footnote.superscript {
  padding-left: 1.2em;
}

/* Directives */
/* ---------- */

/* Body Elements */
/* ~~~~~~~~~~~~~ */

/* Images and Figures */

/* let content flow to the side of aligned images and figures */
figure.align-left,
img.align-left,
video.align-left,
object.align-left {
  clear: left;
  float: left;
  margin-right: 1em;
}
figure.align-right,
img.align-right,
video.align-right,
object.align-right {
  clear: right;
  float: right;
  margin-left: 1em;
}
/* Stop floating sidebars, images and figures */
h1, h2, h3, h4, footer, header { clear: both; }

/* Numbered figures */
figure.numbered > figcaption > p:before {
  counter-increment: figure;
  content: "Figure " counter(figure) ": ";
  font-weight: bold;
}

/* Admonitions and System Messages */
.caution p.admonition-title,
.attention p.admonition-title,
.danger p.admonition-title,
.error p.admonition-title,
.warning p.admonition-title,
div.error {
  color: red;
}

/* Sidebar */
/* Move right. In a layout with fixed margins, */
/* it can be moved into the margin.            */
aside.sidebar {
  width: 30%;
  max-width: 26em;
  float: right;
  clear: right;
  margin-left: 1em;
  margin-right: -1%;
  background-color: #fffffa;
}


/* Code */
pre.code { padding: 0.7ex }
pre.code, code { background-color: #eeeeee }
/* basic highlighting: for a complete scheme, see */
/* http://docutils.sourceforge.net/sandbox/stylesheets/ */
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

/* Math */
/* for math-output=MathML (for math-output=HTML, see math.css) */
math .boldsymbol {
  font-weight: bold;
}
mstyle.mathscr, mi.mathscr {
  font-family: STIX;
}

/* Epigraph           */
/* Highlights         */
/* Pull-Quote         */
/* Compound Paragraph */
/* Container          */

/* Inline Markup */
/* ============= */

sup, sub { line-height: 0.8; } /* do not add leading for lines with sup/sub */

/* Inline Literals                                          */
/* possible values: normal, nowrap, pre, pre-wrap, pre-line */
/*   span.docutils.literal { white-space: pre-wrap; }       */

/* Hyperlink References */
a { text-decoration: none; }

/* External Targets       */
/*   span.target.external */
/* Internal Targets       */
/*   span.target.internal */
/* Footnote References    */
/*   a[role="doc-noteref"] */
/* Citation References    */
/*   a.citation-reference */

</style>
</head>
<body>
<main>


<table class="align-center" style="width: 100%;">
<colgroup>
<col style="width: 80%">
<col style="width: 20%">
</colgroup>
<tbody>
<tr><td><p>Université d'Orléans</p></td>
<td><p>L2 Informatique</p></td>
</tr>
<tr><td><p>Programmation fonctionnelle</p></td>
<td><p>2022-2023</p></td>
</tr>
</tbody>
</table>
<section id="td-n7">
<h2>TD n°7</h2>
<section id="exercice-1-gestion-des-erreurs">
<h3>Exercice 1. Gestion des erreurs</h3>
<p>Sans l'utiliser, donner la réponse que donnerait la boucle interactive
pour chacune des phrases suivantes, en supposant que celles-ci sont
évaluées à la suite.</p>
<pre class="code ocaml literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 ">   <span class="keyword">exception</span> <span class="name class">NoKeyFound</span>
</code><small class="ln"> 2 </small><code data-lineno=" 2 ">   <span class="keyword">type</span> <span class="operator">(</span><span class="keyword">'</span><span class="name">a</span><span class="operator">,</span><span class="keyword">'</span><span class="name">b</span><span class="operator">)</span> <span class="name">entry</span> <span class="operator">=</span> <span class="operator">{</span> <span class="name">key</span><span class="operator">:</span> <span class="keyword">'</span><span class="name">a</span><span class="operator">;</span> <span class="keyword">value</span><span class="operator">:</span> <span class="keyword">'</span><span class="name">b</span> <span class="operator">}</span>
</code><small class="ln"> 3 </small><code data-lineno=" 3 ">   <span class="keyword">let</span> <span class="name">digits</span> <span class="operator">=</span> <span class="operator">[</span> <span class="operator">{</span> <span class="name">key</span> <span class="operator">=</span> <span class="literal number integer">0</span><span class="operator">;</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="literal string double">"zero"</span> <span class="operator">};</span> <span class="operator">{</span> <span class="name">key</span> <span class="operator">=</span> <span class="literal number integer">1</span><span class="operator">;</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="literal string double">"one"</span> <span class="operator">};</span>
</code><small class="ln"> 4 </small><code data-lineno=" 4 ">                  <span class="operator">{</span> <span class="name">key</span> <span class="operator">=</span> <span class="literal number integer">2</span><span class="operator">;</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="literal string double">"two"</span> <span class="operator">};</span>  <span class="operator">{</span> <span class="name">key</span> <span class="operator">=</span> <span class="literal number integer">3</span><span class="operator">;</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="literal string double">"three"</span> <span class="operator">};</span>
</code><small class="ln"> 5 </small><code data-lineno=" 5 ">                  <span class="operator">{</span> <span class="name">key</span> <span class="operator">=</span> <span class="literal number integer">4</span><span class="operator">;</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="literal string double">"four"</span> <span class="operator">};</span> <span class="operator">{</span> <span class="name">key</span> <span class="operator">=</span> <span class="literal number integer">5</span><span class="operator">;</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="literal string double">"five"</span> <span class="operator">};</span>
</code><small class="ln"> 6 </small><code data-lineno=" 6 ">                  <span class="operator">{</span> <span class="name">key</span> <span class="operator">=</span> <span class="literal number integer">6</span><span class="operator">;</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="literal string double">"six"</span> <span class="operator">};</span>  <span class="operator">{</span> <span class="name">key</span> <span class="operator">=</span> <span class="literal number integer">7</span><span class="operator">;</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="literal string double">"seven"</span> <span class="operator">};</span>
</code><small class="ln"> 7 </small><code data-lineno=" 7 ">                  <span class="operator">{</span> <span class="name">key</span> <span class="operator">=</span> <span class="literal number integer">8</span><span class="operator">;</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="literal string double">"eight"</span> <span class="operator">};{</span> <span class="name">key</span> <span class="operator">=</span> <span class="literal number integer">9</span><span class="operator">;</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="literal string double">"nine"</span> <span class="operator">}</span> <span class="operator">]</span>
</code><small class="ln"> 8 </small><code data-lineno=" 8 ">   <span class="keyword">let</span> <span class="keyword">rec</span> <span class="name">find</span> <span class="operator">=</span> <span class="keyword">fun</span> <span class="name">key</span> <span class="keyword type">list</span> <span class="operator">-&gt;</span>
</code><small class="ln"> 9 </small><code data-lineno=" 9 ">     <span class="keyword">match</span> <span class="keyword type">list</span> <span class="keyword">with</span>
</code><small class="ln">10 </small><code data-lineno="10 ">     <span class="operator">|</span> <span class="name builtin pseudo">[]</span> <span class="operator">-&gt;</span> <span class="keyword">raise</span> <span class="name class">NoKeyFound</span>
</code><small class="ln">11 </small><code data-lineno="11 ">     <span class="operator">|</span> <span class="name">head</span><span class="operator">::</span><span class="name">tail</span> <span class="keyword">when</span> <span class="name">head</span><span class="operator">.</span><span class="name">key</span> <span class="operator">=</span> <span class="name">key</span> <span class="operator">-&gt;</span> <span class="name">head</span><span class="operator">.</span><span class="keyword">value</span>
</code><small class="ln">12 </small><code data-lineno="12 ">     <span class="operator">|</span> <span class="operator">_::</span><span class="name">tail</span> <span class="operator">-&gt;</span> <span class="name">find</span> <span class="name">key</span> <span class="name">tail</span>
</code><small class="ln">13 </small><code data-lineno="13 ">   <span class="keyword">let</span> <span class="name">word_of_digit</span> <span class="operator">=</span> <span class="keyword">fun</span> <span class="name">digit</span> <span class="operator">-&gt;</span>
</code><small class="ln">14 </small><code data-lineno="14 ">     <span class="keyword">try</span>
</code><small class="ln">15 </small><code data-lineno="15 ">       <span class="name">find</span> <span class="name">digit</span> <span class="name">digits</span>
</code><small class="ln">16 </small><code data-lineno="16 ">     <span class="keyword">with</span> <span class="name class">NoKeyFound</span> <span class="operator">-&gt;</span> <span class="literal string double">"not a digit"</span></code></pre>
<section id="question-bonus">
<h4>Question bonus</h4>
<p>Sans l'utiliser, donner la réponse que donnerait la boucle interactive
pour chacune des phrases suivantes, en supposant que celles-ci sont
évaluées à la suite.</p>
<pre class="code ocaml literal-block"><small class="ln"> 1 </small><code data-lineno=" 1 ">   <span class="keyword">type</span> <span class="keyword">'</span><span class="name">a</span> <span class="keyword">value</span> <span class="operator">=</span> <span class="name class">Value</span> <span class="keyword">of</span> <span class="keyword">'</span><span class="name">a</span> <span class="operator">|</span> <span class="name class">Error</span> <span class="keyword">of</span> <span class="keyword type">string</span><span class="operator">;</span>
</code><small class="ln"> 2 </small><code data-lineno=" 2 ">   <span class="keyword">let</span> <span class="name">error</span> <span class="operator">=</span> <span class="keyword">fun</span> <span class="name">message</span> <span class="operator">-&gt;</span> <span class="name class">Error</span> <span class="name">message</span>
</code><small class="ln"> 3 </small><code data-lineno=" 3 ">   <span class="keyword">let</span> <span class="name">return</span> <span class="operator">=</span> <span class="keyword">fun</span> <span class="name">v</span> <span class="operator">-&gt;</span> <span class="name class">Value</span> <span class="name">v</span>
</code><small class="ln"> 4 </small><code data-lineno=" 4 ">   <span class="keyword">let</span> <span class="operator">(&gt;&gt;=)</span> <span class="operator">=</span> <span class="keyword">fun</span> <span class="name">data</span> <span class="name">f</span> <span class="operator">-&gt;</span>
</code><small class="ln"> 5 </small><code data-lineno=" 5 ">     <span class="keyword">match</span> <span class="name">data</span> <span class="keyword">with</span>
</code><small class="ln"> 6 </small><code data-lineno=" 6 ">     <span class="operator">|</span> <span class="name class">Error</span> <span class="operator">_</span> <span class="operator">-&gt;</span> <span class="name">data</span>
</code><small class="ln"> 7 </small><code data-lineno=" 7 ">     <span class="operator">|</span> <span class="name class">Value</span> <span class="name">v</span> <span class="operator">-&gt;</span> <span class="name">f</span> <span class="name">v</span>
</code><small class="ln"> 8 </small><code data-lineno=" 8 ">   <span class="keyword">let</span> <span class="keyword">rec</span> <span class="name">find_value</span> <span class="operator">=</span> <span class="keyword">fun</span> <span class="name">key</span> <span class="keyword type">list</span> <span class="operator">-&gt;</span>
</code><small class="ln"> 9 </small><code data-lineno=" 9 ">     <span class="keyword">match</span> <span class="keyword type">list</span> <span class="keyword">with</span>
</code><small class="ln">10 </small><code data-lineno="10 ">     <span class="operator">|</span> <span class="name builtin pseudo">[]</span> <span class="operator">-&gt;</span> <span class="name">error</span> <span class="literal string double">"key not found"</span>
</code><small class="ln">11 </small><code data-lineno="11 ">     <span class="operator">|</span> <span class="name">head</span><span class="operator">::</span><span class="name">tail</span> <span class="keyword">when</span> <span class="name">head</span><span class="operator">.</span><span class="name">key</span> <span class="operator">=</span> <span class="name">key</span> <span class="operator">-&gt;</span> <span class="name">return</span> <span class="name">head</span><span class="operator">.</span><span class="keyword">value</span>
</code><small class="ln">12 </small><code data-lineno="12 ">     <span class="operator">|</span> <span class="operator">_::</span><span class="name">tail</span> <span class="operator">-&gt;</span> <span class="name">find_value</span> <span class="name">key</span> <span class="name">tail</span>
</code><small class="ln">13 </small><code data-lineno="13 ">   <span class="keyword">let</span> <span class="name">fold</span> <span class="operator">=</span> <span class="keyword">fun</span> <span class="name">init_value</span> <span class="name">combine</span> <span class="name">list_of_keys</span> <span class="name">assoc_list</span> <span class="operator">-&gt;</span>
</code><small class="ln">14 </small><code data-lineno="14 ">     <span class="keyword">let</span> <span class="name">find_in_assoc_list</span> <span class="operator">=</span> <span class="keyword">fun</span> <span class="name">key</span> <span class="operator">-&gt;</span> <span class="name">find_value</span> <span class="name">key</span> <span class="name">assoc_list</span> <span class="keyword">in</span>
</code><small class="ln">15 </small><code data-lineno="15 ">     <span class="keyword">let</span> <span class="name">found_values</span> <span class="operator">=</span> <span class="name namespace">List</span><span class="punctuation">.</span><span class="name">map</span> <span class="name">find_in_assoc_list</span> <span class="name">list_of_keys</span> <span class="keyword">in</span>
</code><small class="ln">16 </small><code data-lineno="16 ">     <span class="keyword">let</span> <span class="name">combine_value</span> <span class="operator">=</span> <span class="keyword">fun</span> <span class="keyword">value</span> <span class="name">accumulator</span> <span class="operator">-&gt;</span>
</code><small class="ln">17 </small><code data-lineno="17 ">       <span class="name">accumulator</span> <span class="operator">&gt;&gt;=</span> <span class="keyword">fun</span> <span class="name">a</span> <span class="operator">-&gt;</span> <span class="keyword">value</span> <span class="operator">&gt;&gt;=</span> <span class="keyword">fun</span> <span class="name">v</span> <span class="operator">-&gt;</span> <span class="name">return</span><span class="operator">(</span><span class="name">combine</span> <span class="name">v</span> <span class="name">a</span><span class="operator">)</span> <span class="keyword">in</span>
</code><small class="ln">18 </small><code data-lineno="18 ">     <span class="name namespace">List</span><span class="punctuation">.</span><span class="name">fold_right</span> <span class="name">combine_value</span> <span class="name">found_values</span> <span class="operator">(</span><span class="name">return</span> <span class="name">init_value</span><span class="operator">)</span>
</code><small class="ln">19 </small><code data-lineno="19 ">   <span class="keyword">let</span> <span class="name">concat</span> <span class="operator">=</span> <span class="keyword">fun</span> <span class="name">s1</span> <span class="name">s2</span> <span class="operator">-&gt;</span> <span class="name">s1</span><span class="operator">^</span><span class="literal string double">" "</span><span class="operator">^</span><span class="name">s2</span>
</code><small class="ln">20 </small><code data-lineno="20 ">   <span class="keyword">let</span> <span class="name">v1</span> <span class="operator">=</span> <span class="name">fold</span> <span class="literal string double">""</span> <span class="name">concat</span> <span class="operator">[</span><span class="literal number integer">1</span><span class="operator">;</span> <span class="literal number integer">3</span><span class="operator">;</span> <span class="literal number integer">12</span><span class="operator">;</span> <span class="literal number integer">4</span><span class="operator">;</span> <span class="literal number integer">7</span><span class="operator">]</span> <span class="name">digits</span>
</code><small class="ln">21 </small><code data-lineno="21 ">   <span class="keyword">let</span> <span class="name">v2</span> <span class="operator">=</span> <span class="name">fold</span> <span class="literal string double">""</span> <span class="name">concat</span> <span class="operator">[</span><span class="literal number integer">1</span><span class="operator">;</span> <span class="literal number integer">3</span><span class="operator">;</span> <span class="literal number integer">2</span><span class="operator">;</span> <span class="literal number integer">4</span><span class="operator">;</span> <span class="literal number integer">7</span><span class="operator">]</span> <span class="name">digits</span></code></pre>
</section>
</section>
<section id="exercice-2-enseignants-et-enseignements">
<h3>Exercice 2. Enseignants et enseignements</h3>
<p>Pour la réalisation d'un système d'information de l'université, on
souhaite représenter des enseignements. Un enseignement peut-être un
cours magistral, une séance de travaux dirigées, ou une séance de
travaux pratiques. Un enseignement est identifié par un <em>code</em> (par
exemple <code class="ocaml"><span class="literal string double">"SLA4IF02"</span></code>) le code étant le même pour un titre donné
quelque soit la nature de l'enseignement, un <em>titre</em> (par exemple
<code class="ocaml"><span class="literal string double">"Programmation fonctionnelle"</span></code>), un <em>semestre</em> (par exemple
<cite>4</cite>), et sa <em>nature</em> (cours, TD, TP).</p>
<p>Les enseignants ont un <em>identifiant</em> (numéro d'employé), un <em>nom</em> et
un <em>prénom</em>, et un <em>service</em>, c'est-à-dire la liste des enseignements
qu'ils font pendant une année.</p>
<ul class="simple">
<li><p>Ecrire un type <code class="ocaml"><span class="name">type_enseignement</span></code> pour représenter la nature d'un enseignement.</p></li>
<li><p>Ecrire un type <code class="ocaml"><span class="name">personne</span></code> qui désigne une personne par son nom et son prénom.</p></li>
<li><p>Ecrire un type <code class="ocaml"><span class="name">enseignement</span></code> pour représenter un enseignement.</p></li>
<li><p>Ecrire un type <code class="ocaml"><span class="name">enseignant</span></code> pour représenter un enseignant.</p></li>
</ul>
</section>
<section id="exercice-3-un-autre-type-de-listes-non-vides">
<h3>Exercice 3. Un autre type de listes non-vides</h3>
<section id="question-1">
<h4>Question 1</h4>
<p>Définir un type <em>somme</em> paramétré <code class="ocaml"><span class="keyword">'</span><span class="name">a</span> <span class="name">nelist</span></code> (pour <em>non-empty
list</em>) qui, comme son nom l'indique, permet de représenter des listes
non-vides.</p>
</section>
<section id="question-2">
<h4>Question 2</h4>
<p>Ecrire une fonction <code class="ocaml"><span class="name">of_list</span></code> qui prend une liste OCaml et qui
la convertit en liste non-vide, si c'est possible.  Si ce n'est pas
possible, <code class="ocaml"><span class="name">of_list</span></code> doit lever une exception à définir.</p>
</section>
<section id="question-3">
<h4>Question 3</h4>
<p>Ecrire des fonctions <code class="ocaml"><span class="name">hd</span></code> et <code class="ocaml"><span class="name">tl</span></code> pour ce nouveau type
de liste (<code class="ocaml"><span class="name">tl</span></code> doit renvoyer une liste de type
<code class="ocaml"><span class="name">nelist</span></code>). Si pour certaines valeurs d'entrée il n'est pas
possible de renvoyer un résultat, la fonction devra lever une
exception que vous définirez si elle représente un concept différent
de l'exception déjà définie (et sinon vous pouvez réutiliser
l'exception définie précédemment).</p>
</section>
<section id="question-4">
<h4>Question 4</h4>
<p>Ecrire des fonctions <code class="ocaml"><span class="name">maximum</span></code> et <code class="ocaml"><span class="name">minimum</span></code> qui
renvoient respectivement la plus grande et la plus petite valeur d'une
liste non-vide.</p>
</section>
<section id="question-bonus-1">
<h4>Question bonus</h4>
<ul class="simple">
<li><p>Ecrire une fonction <code class="ocaml"><span class="name">foldr</span><span class="operator">:</span> <span class="operator">(</span><span class="keyword">'</span><span class="name">a</span><span class="operator">-&gt;</span><span class="keyword">'</span><span class="name">b</span><span class="operator">-&gt;</span><span class="keyword">'</span><span class="name">b</span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="operator">(</span><span class="keyword">'</span><span class="name">a</span><span class="operator">-&gt;</span><span class="keyword">'</span><span class="name">b</span><span class="operator">)</span> <span class="operator">-&gt;</span> <span class="keyword">'</span><span class="name">a</span>
<span class="name">nelist</span> <span class="operator">-&gt;</span> <span class="keyword">'</span><span class="name">b</span></code> qui correspond à la fonction <code class="ocaml"><span class="name namespace">List</span><span class="punctuation">.</span><span class="name">fold_right</span></code>
sur les listes OCaml prédéfinies.  La différence est que pour les
listes non-vides on donne une fonction à appliquer à l'élément de la
liste singleton plutôt qu'un élément à retourner si la liste est
vide.</p></li>
<li><p>En utilisant <code class="ocaml"><span class="name">foldr</span></code>, écrire une fonction <code class="ocaml"><span class="name">reduction</span></code>
sur les listes non-vides.  Par exemple si la liste <code class="ocaml"><span class="name">l</span></code>
contient les éléments <code class="ocaml"><span class="literal number integer">1</span></code>, <code class="ocaml"><span class="literal number integer">2</span></code>, et <code class="ocaml"><span class="literal number integer">4</span></code>,
<code class="ocaml"><span class="name">reduction</span> <span class="operator">(+)</span> <span class="name">l</span></code> doit renvoyer <code class="ocaml"><span class="literal number integer">7</span></code>.</p></li>
<li><p>En utilisant <code class="ocaml"><span class="name">foldr</span></code> ou <code class="ocaml"><span class="name">reduction</span></code>, écrire une
fonction qui retourne la longueur d'une liste, une fonction
<code class="ocaml"><span class="name">map</span></code> sur les listes non-vide, la fonction <code class="ocaml"><span class="name">length</span></code>
sur les listes non-vides, et de nouvelles versions de
<code class="ocaml"><span class="name">maximum</span></code> et <code class="ocaml"><span class="name">minimum</span></code>.</p></li>
<li><p>En utilisant <code class="ocaml"><span class="name">foldr</span></code> écrire une fonction <em>infixe</em>
<code class="ocaml"><span class="operator">@@</span></code> qui concatène deux listes non-vides. Par exemple~:</p></li>
</ul>
<pre class="code ocaml literal-block"><small class="ln">1 </small><code data-lineno="1 ">   <span class="operator">#</span> <span class="operator">(</span><span class="name">of_list</span> <span class="operator">[</span><span class="literal number integer">1</span><span class="operator">;</span> <span class="literal number integer">2</span><span class="operator">])</span> <span class="operator">@@</span> <span class="operator">(</span><span class="name">of_list</span> <span class="operator">[</span><span class="literal number integer">3</span><span class="operator">;</span> <span class="literal number integer">4</span><span class="operator">])</span> <span class="operator">=</span> <span class="name">of_list</span> <span class="operator">[</span><span class="literal number integer">1</span><span class="operator">;</span> <span class="literal number integer">2</span><span class="operator">;</span> <span class="literal number integer">3</span><span class="operator">;</span> <span class="literal number integer">4</span><span class="operator">];;</span>
</code><small class="ln">2 </small><code data-lineno="2 ">   <span class="operator">-</span> <span class="operator">:</span> <span class="keyword type">bool</span> <span class="operator">=</span> <span class="name builtin pseudo">true</span></code></pre>
</section>
</section>
</section>
</main>


</body></html>